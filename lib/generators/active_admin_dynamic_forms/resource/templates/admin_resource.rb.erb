# This file was generated by active_admin_dynamic_forms:resource generator.
# You can customize it to your needs.

ActiveAdmin.register <%= @model_name %> do
  menu label: '<%= @resource_name.pluralize %>'
  
  # Add dynamic_form_id to permit_params
  permit_params :dynamic_form_id, # Add other attributes here
  
  index do
    selectable_column
    id_column
    # Add your columns here
    column :dynamic_form do |record|
      record.dynamic_form&.name || 'None'
    end
    column :created_at
    column :updated_at
    actions
  end
  
  show do
    attributes_table do
      row :id
      # Add your attributes here
      row :dynamic_form do |record|
        if record.dynamic_form
          link_to record.dynamic_form.name, admin_form_path(record.dynamic_form)
        else
          'None'
        end
      end
      row :created_at
      row :updated_at
    end
    
    # Display dynamic form data if available
    if resource.form_data.present?
      panel "Form Data" do
        attributes_table_for resource do
          resource.form_data.each do |key, value|
            row key.to_s.humanize do
              if value.is_a?(Array)
                ul do
                  value.each do |item|
                    li item
                  end
                end
              else
                value
              end
            end
          end
        end
      end
    end
  end
  
  form do |f|
    f.inputs 'Dynamic Form' do
      f.input :dynamic_form, as: :dynamic_form, label: 'Select a Form'
    end
    
    f.inputs '<%= @resource_name %> Details' do
      # Add your form inputs here
    end
    
    f.actions
  end
end 